(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{630:function(s,t,e){"use strict";e.r(t);var a=e(1),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("TypeScript 提供了非常多的编译选项，但是官方文档对每一项的解释很抽象，这一章会详细介绍每一个选项的作用，并给出对应的示例。")]),s._v(" "),e("p",[s._v("索引（点击选项跳转到详细介绍）：")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("选项")]),s._v(" "),e("th",[s._v("类型")]),s._v(" "),e("th",[s._v("默认值")]),s._v(" "),e("th",[s._v("描述")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("a",{attrs:{href:"#allowjs"}},[e("code",[s._v("allowJs")])])]),s._v(" "),e("td",[e("code",[s._v("boolean")])]),s._v(" "),e("td",[e("code",[s._v("false")])]),s._v(" "),e("td",[s._v("允许编译 js 文件")])]),s._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"#allowsyntheticdefaultimports"}},[e("code",[s._v("allowSyntheticDefaultImports")])])]),s._v(" "),e("td",[e("code",[s._v("boolean")])]),s._v(" "),e("td",[e("code",[s._v("false")])]),s._v(" "),e("td",[s._v("允许对不包含默认导出的模块使用默认导入。这个选项不会影响生成的代码，只会影响类型检查。")])])])]),s._v(" "),e("h2",{attrs:{id:"allowjs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#allowjs"}},[s._v("#")]),s._v(" allowJs")]),s._v(" "),e("blockquote",[e("p",[s._v("允许编译 js 文件。")])]),s._v(" "),e("p",[s._v("设置为 "),e("code",[s._v("true")]),s._v(" 时，js 文件会被 tsc 编译，否则不会。一般在项目中 js, ts 混合开发时需要设置。")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/xcatliu/typescript-tutorial/tree/master/examples/compiler-options/01-allowJs",target:"_blank",rel:"noopener noreferrer"}},[s._v("查看示例"),e("OutboundLink")],1)]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置为 true 时，编译后的文件包含 foo.js")]),s._v("\n├── lib\n│   ├── foo.js\n│   └── index.js\n├── src\n│   ├── foo.js\n│   └── index.ts\n├── package.json\n└── tsconfig.json\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置为 false 时，编译后的文件不包含 foo.js")]),s._v("\n├── lib\n│   └── index.js\n├── src\n│   ├── foo.js\n│   └── index.ts\n├── package.json\n└── tsconfig.json\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"allowsyntheticdefaultimports"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#allowsyntheticdefaultimports"}},[s._v("#")]),s._v(" allowSyntheticDefaultImports")]),s._v(" "),e("blockquote",[e("p",[s._v("允许对不包含默认导出的模块使用默认导入。这个选项不会影响生成的代码，只会影响类型检查。")])]),s._v(" "),e("p",[e("code",[s._v("export = foo")]),s._v(" 是 ts 为了兼容 commonjs 创造的语法，它对应于 commonjs 中的 "),e("code",[s._v("module.exports = foo")]),s._v("。")]),s._v(" "),e("p",[s._v("在 ts 中，如果要引入一个通过 "),e("code",[s._v("export = foo")]),s._v(" 导出的模块，标准的语法是 "),e("code",[s._v("import foo = require('foo')")]),s._v("，或者 "),e("code",[s._v("import * as foo from 'foo'")]),s._v("。")]),s._v(" "),e("p",[s._v("但由于历史原因，我们已经习惯了使用 "),e("code",[s._v("import foo from 'foo'")]),s._v("。")]),s._v(" "),e("p",[s._v("这个选项就是为了解决这个问题。当它设置为 "),e("code",[s._v("true")]),s._v(" 时，允许使用 "),e("code",[s._v("import foo from 'foo'")]),s._v(" 来导入一个通过 "),e("code",[s._v("export = foo")]),s._v(" 导出的模块。当它设置为 "),e("code",[s._v("false")]),s._v(" 时，则不允许，会报错。")]),s._v(" "),e("p",[s._v("当然，我们一般不会在 ts 文件中使用 "),e("code",[s._v("export = foo")]),s._v(" 来导出模块，而是在"),e("a",{attrs:{href:"../basics/declaration-files#export-1"}},[s._v("写（符合 commonjs 规范的）第三方库的声明文件")]),s._v("时，才会用到 "),e("code",[s._v("export = foo")]),s._v(" 来导出类型。")]),s._v(" "),e("p",[s._v("比如 React 的声明文件中，就是通过 "),e("code",[s._v("export = React")]),s._v(" 来导出类型：")]),s._v(" "),e("div",{staticClass:"language-ts line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("namespace")]),s._v(" React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("namespace")]),s._v(" React "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 声明 React 的类型")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("此时若我们通过 "),e("code",[s._v("import React from 'react'")]),s._v(" 来导入 react 则会报错，"),e("a",{attrs:{href:"https://github.com/xcatliu/typescript-tutorial/tree/master/examples/compiler-options/02-allowSyntheticDefaultImports",target:"_blank",rel:"noopener noreferrer"}},[s._v("查看示例"),e("OutboundLink")],1),s._v("\n：")]),s._v(" "),e("div",{staticClass:"language-ts line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" React "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Module '\"typescript-tutorial/examples/compiler-options/02-allowSyntheticDefaultImports/false/node_modules/@types/react/index\"' can only be default-imported using the 'esModuleInterop' flagts(1259)")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("解决办法就是将 "),e("code",[s._v("allowSyntheticDefaultImports")]),s._v(" 设置为 "),e("code",[s._v("true")]),s._v("。")])])}),[],!1,null,null,null);t.default=n.exports}}]);