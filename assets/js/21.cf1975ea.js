(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{593:function(a,t,r){"use strict";r.r(t);var s=r(1),_=Object(s.a)({},(function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("p",[a._v("前端性能的一个重要指标是页面加载时间，不仅事关用户体验，也是搜索引擎排名考虑的一个因素。")]),a._v(" "),r("blockquote",[r("ul",[r("li",[a._v("来自 Google 的数据表明，一个有 10 条数据 0.4 秒能加载完的页面，变成 30 条数据 0.9 秒加载完之后，流量和广告收入下降 90%。")]),a._v(" "),r("li",[a._v("Google Map 首页文件大小从 100KB 减小到 70-80KB 后，流量在第一周涨了 10%，接下来的三周涨了 25%。")]),a._v(" "),r("li",[a._v("亚马逊的数据表明：加载时间增加 100 毫秒，销量就下降 1%。"),r("br"),a._v("\n以上数据更说明「加载时间就是金钱」，前端优化主要围绕提高加载速度进行。")])])]),a._v(" "),r("h2",{attrs:{id:"一、页面内容"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一、页面内容"}},[a._v("#")]),a._v(" 一、页面内容")]),a._v(" "),r("h3",{attrs:{id:"_1-减少-http-请求数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-减少-http-请求数"}},[a._v("#")]),a._v(" 1.减少 HTTP 请求数")]),a._v(" "),r("p",[a._v("Web 前端 80% 的响应时间花在图片、样式、脚本等资源下载上。浏览器对每个域名的连接数是有限制的，减少请求次数是缩短响应时间的关键。"),r("br"),a._v("\n通过简洁的设计减少页面所需资源，进而减少 HTTP 请求，这是最直接的方式，前提是你的 Boss、设计师同事不打死你。所以，还是另辟蹊径吧：")]),a._v(" "),r("ul",[r("li",[a._v("合并 JavaScript、CSS 等文件；\n"),r("ul",[r("li",[a._v("服务器端（CDN）自动合并")]),a._v(" "),r("li",[a._v("基于 Node.js 的文件合并工具一抓一大把")])])]),a._v(" "),r("li",[a._v("使用"),r("code",[a._v("CSS Sprite")]),a._v("：将背景图片合并成一个文件，通过background-image 和 background-position 控制显示；\n"),r("ul",[r("li",[r("a",{attrs:{href:"http://www.spritecow.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Sprite Cow"),r("OutboundLink")],1)]),a._v(" "),r("li",[r("a",{attrs:{href:"https://www.spritebox.net/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Spritebox"),r("OutboundLink")],1),r("br"),a._v("\n(逐步被 Icon Font 和 SVG Sprite 取代。)")])])]),a._v(" "),r("li",[r("a",{attrs:{href:"https://www.w3.org/TR/html401/struct/objects.html#h-13.6",target:"_blank",rel:"noopener noreferrer"}},[a._v("Image Map"),r("OutboundLink")],1),a._v("：合并图片，然后使用坐标映射不同的区域（"),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/The_Club_(dining_club)",target:"_blank",rel:"noopener noreferrer"}},[a._v("演示"),r("OutboundLink")],1),a._v("）。\n(缺点：仅适用于相连的图片；设置坐标过程乏味且易出错；可访性问题。不推荐使用这种过时的技术。)")]),a._v(" "),r("li",[a._v("Inline Assets：使用 "),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/Data_URI_scheme",target:"_blank",rel:"noopener noreferrer"}},[a._v("Data URI scheme"),r("OutboundLink")],1),a._v(" 将图片嵌入 HTML 或者 CSS 中；或者将 CSS、JS、图片直接嵌入 HTML\n(会增加文件大小，也可能产生浏览器兼容及其他性能问题（有待整理补充）。)"),r("br"),a._v(" "),r("strong",[a._v("未来的趋势是使用内嵌 SVG。")])]),a._v(" "),r("li",[a._v("内容分片，将请求划分到不同的域名上。")])]),a._v(" "),r("blockquote",[r("ul",[r("li",[r("p",[a._v("HTTP/2 通过多路复用大幅降低了多个请求的开销。通过数据分帧层，客户端和服务器之间只需要建立一个 TCP 连接，即可同时收发多个文件，而且，该连接在相当长的时间周期内保持打开（持久化），以便复用。")])]),a._v(" "),r("li",[r("p",[a._v("HTTP/2 的新特性意味着上述优化实践不再适用，但考虑到客户端对 HTTP/2 的支持覆盖程度，还需根据实际数据权衡。")])])])]),a._v(" "),r("h3",{attrs:{id:"_2-减少-dns-查询"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-减少-dns-查询"}},[a._v("#")]),a._v(" 2.减少 DNS 查询")]),a._v(" "),r("p",[a._v("用户输入 URL 以后，浏览器首先要查询域名（hostname）对应服务器的 IP 地址，一般需要耗费 20-120 毫秒 时间。DNS 查询完成之前，浏览器无法从服务器下载任何数据。")]),a._v(" "),r("p",[a._v("基于性能考虑，ISP、局域网、操作系统、浏览器都会有相应的 DNS 缓存机制。")]),a._v(" "),r("ul",[r("li",[a._v("IE 缓存 30 分钟，可以通过注册表中 DnsCacheTimeout 项设置；")]),a._v(" "),r("li",[a._v("Firefox 混存 1 分钟，通过 network.dnsCacheExpiration 配置；")]),a._v(" "),r("li",[a._v("（TODO：补充其他浏览器缓存信息）\n首次访问、没有相应的 DNS 缓存时，域名越多，查询时间越长。所以应尽量减少域名数量。但基于并行下载考虑，"),r("strong",[a._v("把资源分布到 2 个域名上（最多不超过 4 个）")]),a._v("。这是减少 DNS 查询同时保证并行下载的折衷方案。")])]),a._v(" "),r("h3",{attrs:{id:"_3-避免重定向"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-避免重定向"}},[a._v("#")]),a._v(" 3.避免重定向")]),a._v(" "),r("h3",{attrs:{id:"_4-缓存-ajax-请求"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-缓存-ajax-请求"}},[a._v("#")]),a._v(" 4.缓存 Ajax 请求")]),a._v(" "),r("h3",{attrs:{id:"_5-延迟加载"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-延迟加载"}},[a._v("#")]),a._v(" 5.延迟加载")]),a._v(" "),r("h3",{attrs:{id:"_6-预先加载"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-预先加载"}},[a._v("#")]),a._v(" 6.预先加载")]),a._v(" "),r("h3",{attrs:{id:"_7-减少-dom-元素数量"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7-减少-dom-元素数量"}},[a._v("#")]),a._v(" 7.减少 DOM 元素数量")]),a._v(" "),r("h3",{attrs:{id:"_8-划分内容到不同域名"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_8-划分内容到不同域名"}},[a._v("#")]),a._v(" 8.划分内容到不同域名")]),a._v(" "),r("h3",{attrs:{id:"_9-尽量减少-iframe-使用"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_9-尽量减少-iframe-使用"}},[a._v("#")]),a._v(" 9.尽量减少 iframe 使用")]),a._v(" "),r("h3",{attrs:{id:"_10-避免-404-错误"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_10-避免-404-错误"}},[a._v("#")]),a._v(" 10.避免 404 错误")]),a._v(" "),r("h2",{attrs:{id:"二、服务器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二、服务器"}},[a._v("#")]),a._v(" 二、服务器")]),a._v(" "),r("h3",{attrs:{id:"_1-使用-cdn"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用-cdn"}},[a._v("#")]),a._v(" 1.使用 CDN")]),a._v(" "),r("h3",{attrs:{id:"_2-添加-expires-或-cache-control-响应头"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-添加-expires-或-cache-control-响应头"}},[a._v("#")]),a._v(" 2.添加 Expires 或 Cache-Control 响应头")]),a._v(" "),r("h3",{attrs:{id:"_3-启用-gzip"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-启用-gzip"}},[a._v("#")]),a._v(" 3.启用 Gzip")]),a._v(" "),r("h3",{attrs:{id:"_4-配置-etag"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置-etag"}},[a._v("#")]),a._v(" 4.配置 Etag")]),a._v(" "),r("h3",{attrs:{id:"_5-尽早输出缓冲"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-尽早输出缓冲"}},[a._v("#")]),a._v(" 5.尽早输出缓冲")]),a._v(" "),r("h3",{attrs:{id:"_6-ajax-请求使用-get-方法"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-ajax-请求使用-get-方法"}},[a._v("#")]),a._v(" 6.Ajax 请求使用 GET 方法")]),a._v(" "),r("h3",{attrs:{id:"_7-避免图片-src-为空"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7-避免图片-src-为空"}},[a._v("#")]),a._v(" 7.避免图片 src 为空")]),a._v(" "),r("h2",{attrs:{id:"三、cookie"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三、cookie"}},[a._v("#")]),a._v(" 三、Cookie")]),a._v(" "),r("h3",{attrs:{id:"_1-减少-cookie-大小"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-减少-cookie-大小"}},[a._v("#")]),a._v(" 1.减少 Cookie 大小")]),a._v(" "),r("h3",{attrs:{id:"_2-静态资源使用无-cookie-域名"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-静态资源使用无-cookie-域名"}},[a._v("#")]),a._v(" 2.静态资源使用无 Cookie 域名")]),a._v(" "),r("h2",{attrs:{id:"四、css"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#四、css"}},[a._v("#")]),a._v(" 四、CSS")]),a._v(" "),r("h3",{attrs:{id:"_1-把样式表放在-head-中"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-把样式表放在-head-中"}},[a._v("#")]),a._v(" 1.把样式表放在 "),r("code",[a._v("<head>")]),a._v(" 中")]),a._v(" "),r("h3",{attrs:{id:"_2-不要使用-css-表达式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-不要使用-css-表达式"}},[a._v("#")]),a._v(" 2.不要使用 CSS 表达式")]),a._v(" "),r("h3",{attrs:{id:"_3-使用-link-替代-import"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用-link-替代-import"}},[a._v("#")]),a._v(" 3.使用 "),r("code",[a._v("<link>")]),a._v(" 替代 @import")]),a._v(" "),r("h3",{attrs:{id:"_4-不要使用-filter"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-不要使用-filter"}},[a._v("#")]),a._v(" 4.不要使用 filter")]),a._v(" "),r("h2",{attrs:{id:"五、javascript"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#五、javascript"}},[a._v("#")]),a._v(" 五、JavaScript")]),a._v(" "),r("h3",{attrs:{id:"_1-把脚本放在页面底部"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-把脚本放在页面底部"}},[a._v("#")]),a._v(" 1.把脚本放在页面底部")]),a._v(" "),r("h3",{attrs:{id:"_2-使用外部-javascript-和-css"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用外部-javascript-和-css"}},[a._v("#")]),a._v(" 2.使用外部 JavaScript 和 CSS")]),a._v(" "),r("h3",{attrs:{id:"_3-压缩-javascript-和-css"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-压缩-javascript-和-css"}},[a._v("#")]),a._v(" 3.压缩 JavaScript 和 CSS")]),a._v(" "),r("h3",{attrs:{id:"_4-移除重复脚本"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-移除重复脚本"}},[a._v("#")]),a._v(" 4.移除重复脚本")]),a._v(" "),r("h3",{attrs:{id:"_5-减少-dom-操作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-减少-dom-操作"}},[a._v("#")]),a._v(" 5.减少 DOM 操作")]),a._v(" "),r("h3",{attrs:{id:"_6-使用高效的事件处理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-使用高效的事件处理"}},[a._v("#")]),a._v(" 6.使用高效的事件处理")]),a._v(" "),r("h2",{attrs:{id:"六、图片"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#六、图片"}},[a._v("#")]),a._v(" 六、图片")]),a._v(" "),r("h3",{attrs:{id:"_1-优化图片"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-优化图片"}},[a._v("#")]),a._v(" 1.优化图片")]),a._v(" "),r("h3",{attrs:{id:"_2-优化-css-sprite"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-优化-css-sprite"}},[a._v("#")]),a._v(" 2.优化 CSS Sprite")]),a._v(" "),r("h3",{attrs:{id:"_3-不要在-html-中缩放图片"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-不要在-html-中缩放图片"}},[a._v("#")]),a._v(" 3.不要在 HTML 中缩放图片")]),a._v(" "),r("h3",{attrs:{id:"_4-使用体积小、可缓存的-favicon-ico"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用体积小、可缓存的-favicon-ico"}},[a._v("#")]),a._v(" 4.使用体积小、可缓存的 favicon.ico")]),a._v(" "),r("h2",{attrs:{id:"七、移动端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#七、移动端"}},[a._v("#")]),a._v(" 七、移动端")]),a._v(" "),r("h3",{attrs:{id:"_1-保持单个文件小于-25-kb"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-保持单个文件小于-25-kb"}},[a._v("#")]),a._v(" 1.保持单个文件小于 25 KB")]),a._v(" "),r("h3",{attrs:{id:"_2-打包内容为分段（multipart）文档"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-打包内容为分段（multipart）文档"}},[a._v("#")]),a._v(" 2.打包内容为分段（multipart）文档")])])}),[],!1,null,null,null);t.default=_.exports}}]);